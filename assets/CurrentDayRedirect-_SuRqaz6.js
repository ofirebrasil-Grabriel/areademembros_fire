import{j as e,s as u,g as y,a as g}from"./index-BWNE2clS.js";import{u as p,r as m}from"./vendor-gtDS_TVX.js";import{T as h,d as j}from"./ui-R5Y-RMdR.js";import"./supabase-B6PhnEZn.js";const C=()=>{const a=p(),[c,l]=m.useState(null);return m.useEffect(()=>{(async()=>{try{const{data:{user:s}}=await u.auth.getUser(),x=(s==null?void 0:s.id)||"mock-user-id",[r,f]=await Promise.all([y(),g(x)]);if(r.length===0){l("Nenhum desafio encontrado. O sistema pode nÃ£o ter sido inicializado.");return}let i=0;for(const t of r){const d=t.tasks.map(n=>n.id);if(d.length===0||d.every(n=>f.includes(n)))i=t.day_number;else break}let o=i+1;r.some(t=>t.day_number===o)||(o=Math.max(1,i)),a(`/day/${o}`)}catch(s){console.error("Redirect error",s),l("Erro ao redirecionar para o desafio atual.")}})()},[a]),c?e.jsx("div",{className:"min-h-screen bg-fire-dark flex flex-col items-center justify-center text-white p-4 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 max-w-md",children:[e.jsx(h,{className:"text-yellow-500",size:48}),e.jsx("h2",{className:"text-xl font-bold",children:"Ops! Algo deu errado."}),e.jsx("p",{className:"text-fire-gray",children:c}),e.jsx("button",{onClick:()=>a("/"),className:"bg-fire-secondary hover:bg-fire-secondary/80 text-white px-6 py-2 rounded-lg transition-colors",children:"Voltar ao Painel"})]})}):e.jsx("div",{className:"min-h-screen bg-fire-dark flex flex-col items-center justify-center text-white",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center gap-4",children:[e.jsx(j,{className:"text-fire-orange animate-bounce",size:48}),e.jsx("p",{className:"text-fire-gray font-medium",children:"Buscando seu desafio atual..."})]})})};export{C as CurrentDayRedirect};
