import{j as e,l as g,m as f}from"./index-BzRcWxia.js";import{r,u as b}from"./vendor-Cwg8D7Hp.js";import{a as p,U as u,a2 as j,a3 as v,k as N,a4 as l,a5 as y,w}from"./ui-C5d7_9yU.js";import"./supabase-DfaSXaSt.js";const M=()=>{const[s,n]=r.useState(null),[i,o]=r.useState([]),[d,c]=r.useState(!0),x=b();if(r.useEffect(()=>{(async()=>{const[a,h]=await Promise.all([g(),f()]);n(a),o(h),c(!1)})()},[]),d||!s)return e.jsxs("div",{className:"flex items-center justify-center h-64 text-fire-gray",children:[e.jsx(p,{className:"animate-spin mr-2"})," Carregando estatísticas..."]});const m=[{label:"Membros Totais",value:s.totalMembers,icon:u,change:"Total",color:"text-blue-400",bg:"bg-blue-400/10"},{label:"Receita (Estimada)",value:`R$ ${(s.activeUsers*297).toLocaleString()}`,icon:j,change:"Est.",color:"text-green-400",bg:"bg-green-400/10"},{label:"Usuários Ativos",value:s.activeUsers,icon:v,change:`${Math.round((s.activeUsers/s.totalMembers||0)*100)}%`,color:"text-fire-orange",bg:"bg-fire-orange/10"},{label:"Conclusão Média",value:`${s.avgCompletion}%`,icon:N,change:"Geral",color:"text-purple-400",bg:"bg-purple-400/10"}];return e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-12",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white font-montserrat",children:"Painel Administrativo"}),e.jsx("p",{className:"text-fire-gray mt-1",children:"Visão geral do desempenho e saúde do Desafio FIRE."})]}),e.jsxs("div",{className:"text-sm text-fire-gray bg-white/5 px-4 py-2 rounded-lg border border-white/5 flex items-center gap-2",children:[e.jsx(l,{size:14}),"Atualizado: ",new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:m.map((t,a)=>e.jsxs("div",{className:"bg-fire-secondary/20 border border-white/5 p-6 rounded-xl hover:bg-fire-secondary/30 transition-all hover:-translate-y-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${t.bg} ${t.color}`,children:e.jsx(t.icon,{size:24})}),e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-white/5 text-fire-gray",children:t.change})]}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-1 font-montserrat",children:t.value}),e.jsx("p",{className:"text-fire-gray text-sm",children:t.label})]},a))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-fire-secondary/20 border border-white/5 rounded-xl p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("h2",{className:"text-xl font-bold text-white font-montserrat flex items-center gap-2",children:[e.jsx(y,{className:"text-fire-orange",size:20}),"Engajamento"]})}),e.jsx("div",{className:"h-64 flex items-end justify-between gap-3 px-2",children:[35,45,30,60,55,75,50,65,80,70,90,85,95,80,70].map((t,a)=>e.jsxs("div",{className:"w-full relative group",children:[e.jsxs("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-white text-fire-dark text-xs font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[t,"%"]}),e.jsx("div",{className:"w-full bg-gradient-to-t from-fire-secondary to-fire-orange/50 rounded-t-sm hover:from-fire-orange hover:to-fire-orange transition-all duration-300 cursor-pointer",style:{height:`${t}%`}})]},a))}),e.jsxs("div",{className:"flex justify-between mt-4 text-xs text-fire-gray border-t border-white/5 pt-4",children:[e.jsx("span",{children:"Início do Mês"}),e.jsx("span",{children:"Meio do Mês"}),e.jsx("span",{children:"Hoje"})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-fire-secondary/20 border border-white/5 rounded-xl p-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-white mb-4 font-montserrat flex items-center gap-2",children:[e.jsx(w,{size:18,className:"text-fire-orange"}),"Conteúdo"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/5",children:[e.jsx("div",{className:"text-sm text-fire-gray",children:"Módulo de Aulas"}),e.jsx("div",{className:"font-bold text-white",children:"15 Dias"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/5",children:[e.jsx("div",{className:"text-sm text-fire-gray",children:"Status"}),e.jsx("div",{className:"font-bold text-green-400 text-xs uppercase bg-green-500/10 px-2 py-1 rounded",children:"Ativo"})]}),e.jsx("button",{onClick:()=>x("/admin/challenges"),className:"w-full mt-2 text-xs text-fire-orange hover:text-white transition-colors text-center",children:"Gerenciar Conteúdo →"})]})]})})]}),e.jsxs("div",{className:"bg-fire-secondary/20 border border-white/5 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white font-montserrat mb-4",children:"Atividade Recente"}),i.length>0?e.jsx("div",{className:"space-y-4",children:i.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between border-b border-white/5 pb-3 last:border-0 last:pb-0 hover:bg-white/5 p-2 rounded transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-fire-orange/20 flex items-center justify-center text-fire-orange text-xs font-bold border border-fire-orange/20",children:t.user_name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-white",children:[e.jsx("span",{className:"font-bold",children:t.user_name})," completou tarefa:"]}),e.jsxs("p",{className:"text-xs text-fire-gray",children:["Dia ",t.day_number," - ",t.task_title]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-fire-gray flex items-center gap-1 justify-end",children:[e.jsx(l,{size:12}),new Date(t.completed_at).toLocaleDateString("pt-BR")]}),e.jsx("div",{className:"text-[10px] text-fire-gray/60",children:new Date(t.completed_at).toLocaleTimeString("pt-BR")})]})]},t.id||a))}):e.jsx("div",{className:"text-center py-8 text-fire-gray",children:e.jsx("p",{children:"Nenhuma atividade recente registrada."})})]})]})};export{M as AdminDashboard};
